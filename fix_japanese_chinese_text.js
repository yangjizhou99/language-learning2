#!/usr/bin/env node

const fs = require('fs');

// 日语页面中文文本替换脚本
function fixJapaneseChineseText() {
  console.log('🔄 开始修复日语页面中的中文文本...');
  
  const filePath = 'src/components/shadowing/JapaneseShadowingPage.tsx';
  
  try {
    let content = fs.readFileSync(filePath, 'utf8');
    
    // 用户界面相关的中文文本替换
    const replacements = [
      // 按钮和操作文本
      ['播放音频', '音声再生'],
      ['播放中...', '再生中...'],
      ['保存草稿', '下書き保存'],
      ['保存中...', '保存中...'],
      ['完成', '完了'],
      ['退出生词模式', '単語選択モードを終了'],
      ['生词选择模式', '単語選択モード'],
      ['点击文本中的单词来选择生词', 'コピー選択'],
      
      // 等级相关
      ['全部等级', 'すべてのレベル'],
      ['L1 - 初级', 'L1 - 初級'],
      ['L2 - 初中级', 'L2 - 初中級'],
      ['L3 - 中级', 'L3 - 中級'],
      ['L4 - 中高级', 'L4 - 中高級'],
      ['L5 - 高级', 'L5 - 高級'],
      
      // 提示和消息文本
      ['已选择的文本', '選択されたテキスト'],
      ['已选择的生词', '選択された単語'],
      ['选词提示', '単語選択ヒント'],
      ['拖拽选择单词或短语，松开鼠标后稍等（不超过50个字符），选择完成后会显示确认按钮', '単語やフレーズをドラッグして選択し、マウスを離した後少し待ってください（50文字以内）。選択完了後に確認ボタンが表示されます'],
      
      // 确认和删除相关
      ['确定要删除生词', '単語を削除しますか'],
      ['这将从生词表中永久删除', 'これは単語表から永久に削除されます'],
      ['添加生词失败，请重试', '単語の追加に失敗しました。再試行してください'],
      ['添加生词失败', '単語の追加に失敗'],
      ['已成功添加到生词本', '単語帳に正常に追加されました'],
      
      // 保存和状态相关
      ['草稿已保存', '下書きが保存されました'],
      ['保存失败', '保存に失敗しました'],
      ['生词已保存到数据库', '単語がデータベースに保存されました'],
      ['保存生词失败', '単語の保存に失敗'],
      ['生词移除已保存到数据库', '単語の削除がデータベースに保存されました'],
      ['生词已从生词表中删除', '単語が単語表から削除されました'],
      ['从生词表删除失败', '単語表からの削除に失敗'],
      ['录音已自动保存到数据库', '録音が自動的にデータベースに保存されました'],
      ['录音删除已同步到数据库', '録音の削除がデータベースに同期されました'],
      ['删除录音失败', '録音の削除に失敗'],
      
      // 评分和反馈相关
      ['发音准确率', '発音精度'],
      ['非常棒', '素晴らしい'],
      ['很好', '良い'],
      ['还不错', 'まあまあ'],
      ['需要加强练习', '練習を強化する必要があります'],
      ['继续保持这个水平', 'このレベルを維持してください'],
      ['可以尝试更清晰地发音', 'より明確に発音してみてください'],
      ['注意语调和节奏', 'イントネーションとリズムに注意してください'],
      ['建议多听几遍原文', '原文を何度も聞くことをお勧めします'],
      ['注意单词的发音', '単語の発音に注意してください'],
      ['可以尝试放慢语速', '話す速度を遅くしてみてください'],
      ['建议先听几遍原文再练习', '練習前に原文を何度も聞くことをお勧めします'],
      ['注意每个单词的发音', '各単語の発音に注意してください'],
      ['可以分段练习', 'セクションごとに練習できます'],
      ['多练习几次会更好', '何度も練習するとより良くなります'],
      ['转录内容较少，建议重新录音', '転写内容が少ないです。再録音をお勧めします'],
      ['转录内容不完整，建议重新录音', '転写内容が不完全です。再録音をお勧めします'],
      ['建议', '提案'],
      ['没有找到转录文字，无法进行评分', '転写文字が見つかりません。採点できません'],
      ['评分失败', '採点に失敗'],
      ['未知错误', '不明なエラー'],
      
      // 生词和翻译相关
      ['所有生词都已经有翻訳了', 'すべての単語に翻訳があります'],
      ['准备生成AI翻訳', 'AI翻訳の生成準備中'],
      ['正在为', '生成中'],
      ['生成AI翻訳', 'AI翻訳を生成'],
      ['成功为', '成功'],
      ['个生词生成翻訳', '個の単語の翻訳を生成'],
      ['没有成功生成任何AI翻訳，请重试', 'AI翻訳の生成に失敗しました。再試行してください'],
      ['批量生成AI翻訳失败', '一括AI翻訳生成に失敗'],
      ['请重试', '再試行してください'],
      ['生成翻訳失败', '翻訳生成に失敗'],
      ['保存AI翻訳到数据库', 'AI翻訳をデータベースに保存'],
      ['AI翻訳已保存到数据库', 'AI翻訳がデータベースに保存されました'],
      ['保存AI翻訳失败', 'AI翻訳の保存に失敗'],
      ['保存批量AI翻訳时出错', '一括AI翻訳保存時にエラー'],
      ['批量AI翻訳已保存到数据库', '一括AI翻訳がデータベースに保存されました'],
      
      // 调试和日志相关
      ['单词本数据', '単語帳データ'],
      ['中秋节相关条目', '中秋節関連エントリ'],
      ['单词本中有', '単語帳に'],
      ['个条目', '個のエントリ'],
      ['获取单词本数据失败', '単語帳データの取得に失敗'],
      ['调试单词本数据失败', '単語帳データのデバッグに失敗'],
      ['从单词本找到翻訳', '単語帳から翻訳を発見'],
      ['检查已有翻訳失败', '既存翻訳の確認に失敗'],
      
      // 其他界面文本
      ['简体中文', '簡体中国語'],
      ['获取用户资料失败', 'ユーザー情報取得失敗'],
      ['手机端点击切换', 'モバイル端クリック切り替え'],
      ['显示品詞信息', '品詞情報を表示'],
      ['加载到之前的会话数据', '前のセッションデータを読み込み'],
      ['还原的生词', '復元された単語'],
      ['将之前的生词设置为', '前の単語を設定'],
      ['从fileName中提取路径', 'fileNameからパスを抽出'],
      ['重新生成录音的signed URL', '録音のsigned URLを再生成'],
      ['因为之前的URL可能已过期', '前のURLが期限切れの可能性があるため'],
      ['重新生成signed URL', 'signed URLを再生成'],
      ['重新生成URL失败', 'URL再生成失敗'],
      ['处理录音URL时出错', '録音URL処理エラー'],
      ['没有找到之前的会话数据', '前のセッションデータが見つかりません'],
      ['选择录音进行评分', '録音を選択して採点'],
      ['文分析计算総合採点', '文分析で総合採点を計算'],
      ['文对比分析', '文比較分析'],
      ['分析每个文', '各文を分析'],
      ['计算文匹配度', '文マッチ度を計算'],
      ['文匹配度', '文マッチ度'],
      ['文', '文'],
      ['问题', '問題'],
      ['句子', '文'],
      ['详细分析', '詳細分析'],
      ['练习对比', '練習比較'],
      ['原文', '原文'],
      ['你的发音', 'あなたの発音'],
      ['整体评分', '総合採点'],
      ['发音准确性', '発音精度'],
      ['改进建议', '改善提案'],
      ['分析基于句子级别，更直观地显示发音问题', '文レベルでの分析により、発音の問題をより直感的に表示'],
      ['所有题目都已练习过', 'すべての問題を練習済み'],
      ['请先完成录音，然后点击下方按钮进行评分', 'まず録音を完了してから、下のボタンをクリックして採点してください'],
      ['您已完成录音，点击下方按钮进行评分', '録音が完了しました。下のボタンをクリックして採点してください'],
      ['录音完成', '録音完了'],
      ['评分中', '採点中'],
      ['开始评分', '採点開始'],
      ['还没有录音', 'まだ録音していません'],
      ['重新评分', '再採点'],
      ['重新评分中', '再採点中'],
      ['暂无解释', '翻訳なし'],
      ['刷新解释', '翻訳を更新'],
      ['解释', '翻訳'],
      ['词性', '品詞'],
      ['例句', '例文'],
      ['已选择的生词', '選択された単語'],
      ['所有题目都已练习过', 'すべての問題を練習済み'],
      ['请先完成录音，然后点击下方按钮进行评分', 'まず録音を完了してから、下のボタンをクリックして採点してください'],
      ['您已完成录音，点击下方按钮进行评分', '録音が完了しました。下のボタンをクリックして採点してください'],
      ['录音完成', '録音完了'],
      ['评分中', '採点中'],
      ['开始评分', '採点開始'],
      ['还没有录音', 'まだ録音していません'],
      ['重新评分', '再採点'],
      ['重新评分中', '再採点中'],
      ['暂无解释', '翻訳なし'],
      ['刷新解释', '翻訳を更新'],
      ['解释', '翻訳'],
      ['词性', '品詞'],
      ['例句', '例文'],
      ['已选择的生词', '選択された単語']
    ];
    
    // 执行替换
    replacements.forEach(([chinese, japanese]) => {
      const regex = new RegExp(chinese.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'), 'g');
      content = content.replace(regex, japanese);
    });
    
    // 写入文件
    fs.writeFileSync(filePath, content);
    
    console.log('✅ 日语页面中文文本修复完成！');
    console.log(`📝 共处理了 ${replacements.length} 个替换项`);
    
  } catch (error) {
    console.error('❌ 修复失败:', error.message);
    process.exit(1);
  }
}

// 运行修复
fixJapaneseChineseText();
