@@
-  const requirements = material?.requirements || [];
-  const evaluation = latestAttempt?.feedback_json || null;
-  const requirementFeedback: Array<{ label: string; met?: boolean; comment?: string }> =
-    evaluation?.requirements || [];
+  const requirements = material?.requirements || [];
+  const evaluation = latestAttempt?.feedback_json || null;
+  const evaluationErrors: Array<{ type?: string; original: string; correction: string }> =
+    Array.isArray(evaluation?.errors)
+      ? evaluation.errors.map((item: any) => ({
+          type: item?.type || 'error',
+          original: item?.original || '',
+          correction: item?.correction || '',
+        }))
+      : [];
+  const evaluationSuggestions: string[] = Array.isArray(evaluation?.suggestions)
+    ? evaluation.suggestions.filter((s: any) => typeof s === 'string' && s.trim()).map((s: string) => s.trim())
+    : [];
+  const evaluationCompleted = evaluation ? Boolean(evaluation.task_completed) : null;

