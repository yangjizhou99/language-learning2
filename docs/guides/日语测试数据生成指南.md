# 日语测试数据生成指南

## 概述

本指南将帮助您通过管理页面生成日语测试数据，完成第四阶段的功能测试。

## 前置条件

- ✅ 服务器已启动 (http://localhost:3000)
- ✅ 日语音素数据已插入 (28个音素)
- ✅ 管理页面已更新支持日语
- ✅ 所有API端点已创建

## 生成步骤

### 第一步：访问管理页面

1. 打开浏览器访问：http://localhost:3000/admin/pronunciation
2. 确保已登录系统

### 第二步：选择日语

1. 在页面顶部的语言选择器中选择：🇯🇵 日本語
2. 页面标题应显示：发音评测系统管理 - 日本語

### 第三步：生成日语句子

1. 点击 "AI 生成句子" 按钮
2. 在弹出的对话框中输入：
   - 生成数量：20
   - 难度等级：2
3. 点击 "开始生成句子"
4. 等待生成完成（约30-60秒）

### 第四步：补全句节关联

1. 句子生成完成后，点击 "补全句节关联" 按钮
2. 等待处理完成（约10-30秒）
3. 这将自动为每个日语句子生成对应的音素关联

### 第五步：生成训练内容

1. 关联完成后，点击 "生成训练内容" 按钮
2. 等待处理完成（约1-2分钟）
3. 这将为每个日语音素生成详细的训练指导

## 验证结果

### 检查句子数据
```sql
SELECT COUNT(*) FROM pron_sentences WHERE lang = 'ja-JP';
```

### 检查关联数据
```sql
SELECT COUNT(*) FROM sentence_units su
JOIN unit_catalog uc ON su.unit_id = uc.unit_id
WHERE uc.lang = 'ja-JP';
```

### 检查训练内容
```sql
SELECT COUNT(*) FROM training_content WHERE lang = 'ja-JP';
```

## 预期结果

- **日语句子**: 20个
- **音节关联**: 约100-200条
- **训练内容**: 28个（对应28个日语音素）

## 测试功能

生成数据后，可以测试以下功能：

1. **练习页面**: http://localhost:3000/practice/pronunciation
   - 选择日语
   - 测试句子显示
   - 测试发音评测

2. **个人画像**: http://localhost:3000/practice/pronunciation/profile
   - 选择日语
   - 查看雷达图
   - 查看等级分布

3. **覆盖度统计**: 在练习页面查看覆盖度进度组件

## 故障排除

### 如果生成失败
1. 检查网络连接
2. 确保DeepSeek API配置正确
3. 检查控制台错误信息

### 如果关联失败
1. 确保日语音素数据完整
2. 检查日语G2P工具是否正常工作

### 如果训练内容生成失败
1. 确保音素数据存在
2. 检查AI API配置

## 完成标志

当看到以下信息时，表示生成成功：

```
✅ AI 句子生成成功！
• 生成句子：20 个
• 音节关联：150 条
• 难度等级：2
💡 新句子已添加到练习库！
```

## 下一步

数据生成完成后，可以：

1. 测试日语发音评测功能
2. 验证可视化组件
3. 测试完整的日语学习流程
4. 进行性能测试

---

**注意**: 如果遇到任何问题，请检查浏览器控制台的错误信息，并确保所有依赖服务正常运行。

