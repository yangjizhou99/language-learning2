# 日语功能测试检查清单

## 测试环境
- 服务器：http://localhost:3000 ✅
- 数据库：日语音素已插入 (28个) ✅
- 管理页面：已更新支持日语 ✅

## 测试步骤

### 1. 管理页面测试

**访问**: http://localhost:3000/admin/pronunciation

**检查项目**:
- [ ] 页面正常加载
- [ ] 语言选择器显示 🇯🇵 日本語 选项
- [ ] 选择日语后页面标题显示 "日本語"
- [ ] 统计卡片显示日语数据（当前应为0）

**操作测试**:
- [ ] 点击 "AI 生成句子"
- [ ] 输入参数：数量20，难度2
- [ ] 点击 "开始生成句子"
- [ ] 等待生成完成（30-60秒）
- [ ] 检查成功消息显示

- [ ] 点击 "补全句节关联"
- [ ] 等待处理完成（10-30秒）
- [ ] 检查成功消息显示

- [ ] 点击 "生成训练内容"
- [ ] 等待处理完成（1-2分钟）
- [ ] 检查成功消息显示

### 2. 练习页面测试

**访问**: http://localhost:3000/practice/pronunciation

**检查项目**:
- [ ] 页面正常加载
- [ ] 语言选择器显示 🇯🇵 日本語 选项
- [ ] 选择日语后页面正常切换
- [ ] 显示日语句子列表
- [ ] 覆盖度进度组件显示日语数据

**功能测试**:
- [ ] 麦克风检查功能正常
- [ ] 录音功能正常
- [ ] 发音评测功能正常
- [ ] 评测结果正确显示

### 3. 个人画像页面测试

**访问**: http://localhost:3000/practice/pronunciation/profile

**检查项目**:
- [ ] 页面正常加载
- [ ] 语言选择器显示 🇯🇵 日本語 选项
- [ ] 选择日语后数据正确更新

**可视化测试**:
- [ ] 雷达图正常显示（日语音素分类）
- [ ] 饼图正常显示（等级分布）
- [ ] 鼠标悬停显示详细信息
- [ ] 数据为空时显示友好提示

### 4. 数据库验证

**检查日语句子**:
```sql
SELECT COUNT(*) FROM pron_sentences WHERE lang = 'ja-JP';
-- 预期：20个
```

**检查音节关联**:
```sql
SELECT COUNT(*) FROM sentence_units su
JOIN unit_catalog uc ON su.unit_id = uc.unit_id
WHERE uc.lang = 'ja-JP';
-- 预期：100-200条
```

**检查训练内容**:
```sql
SELECT COUNT(*) FROM training_content WHERE lang = 'ja-JP';
-- 预期：28个
```

### 5. API端点测试

**测试句子生成API**:
```bash
curl -X POST http://localhost:3000/api/admin/pronunciation/generate-sentences \
  -H "Content-Type: application/json" \
  -d '{"count":5,"level":2,"lang":"ja-JP"}'
```

**测试雷达图API**:
```bash
curl "http://localhost:3000/api/pronunciation/radar-data?lang=ja-JP"
```

**测试覆盖度API**:
```bash
curl "http://localhost:3000/api/pronunciation/coverage-stats?lang=ja-JP"
```

## 预期结果

### 成功标志
- ✅ 管理页面可以生成日语句子
- ✅ 练习页面显示日语内容
- ✅ 个人画像显示日语数据
- ✅ 所有API端点正常响应
- ✅ 数据库包含完整的日语数据

### 性能指标
- 句子生成：< 60秒
- 关联处理：< 30秒
- 训练内容生成：< 120秒
- 页面加载：< 2秒
- API响应：< 200ms

## 故障排除

### 常见问题
1. **生成失败**: 检查DeepSeek API配置
2. **关联失败**: 检查日语音素数据
3. **页面错误**: 检查浏览器控制台
4. **API错误**: 检查网络连接

### 调试方法
1. 打开浏览器开发者工具
2. 查看Console标签页的错误信息
3. 查看Network标签页的API请求
4. 检查数据库连接状态

## 测试完成标准

当以下所有项目都通过时，表示日语功能测试完成：

- [ ] 管理页面可以生成20个日语句子
- [ ] 自动生成100+条音节关联
- [ ] 自动生成28个训练内容
- [ ] 练习页面正常显示日语内容
- [ ] 个人画像页面正常显示日语数据
- [ ] 所有API端点正常响应
- [ ] 无JavaScript错误
- [ ] 无网络请求失败

---

**注意**: 如果任何步骤失败，请记录错误信息并检查相关配置。
